@using ntbs_service.Helpers
@using ntbs_service.Models.Enums
@model OverviewModel

@{
    var sectionSubPath = NotificationSubPaths.EditHospitalDetails;
}

<div class="notification-overview-type-and-edit-container" id="@OverviewSubPathToAnchorMap.GetOverviewAnchorId(sectionSubPath)">
    <h3 class="notification-details-type"> Hospital Details </h3>
    @if (Model.PermissionLevel == PermissionLevel.Edit)
    {
        <a href="@RouteHelper.GetNotificationPath(Model.NotificationId, sectionSubPath)"
           class="notification-edit-link govuk-link--no-visited-state">
            Edit
        </a>
    }
</div>

<div class="notification-overview-details-container">

    <nhs-grid-row>
        <nhs-grid-column grid-column-width="OneQuarter">
            <div class="notification-details-label"> TB service </div>
            <div class="cell-min-height"> @Model.Notification.HospitalDetails.TBServiceName </div>
        </nhs-grid-column>
        <nhs-grid-column grid-column-width="OneQuarter">
            <div class="notification-details-label"> Hospital </div>
            <div class="cell-min-height" id="overview-hospital-name"> @Model.Notification.HospitalDetails.HospitalName </div>
        </nhs-grid-column>
        <nhs-grid-column grid-column-width="OneQuarter">
            <div class="notification-details-label"> Case Manager </div>
            <div class="cell-min-height">
                @if (@Model.Notification.HospitalDetails.CaseManager == null)
                {
                    @Model.Notification.HospitalDetails.CaseManagerName
                }
                else
                {
                    <a href=@($"/ContactDetails/{@Model.Notification.HospitalDetails.CaseManagerUsername}")>
                        @Model.Notification.HospitalDetails.CaseManagerName
                    </a>
                }
            </div>
        </nhs-grid-column>
        <nhs-grid-column grid-column-width="OneQuarter">
            <div class="notification-details-label"> Consultant </div>
            <div class="cell-min-height"> @Model.Notification.HospitalDetails.Consultant </div>
        </nhs-grid-column>
    </nhs-grid-row>

    @if (Model.Notification.NotificationStatus == NotificationStatus.Denotified)
    {
        <nhs-grid-row>
            <nhs-grid-column grid-column-width="OneQuarter">
                <div class="notification-details-label"> Denotification Date </div>
                <div class="cell-min-height"> @Model.Notification?.DenotificationDetails.FormattedDenotificationDate </div>
            </nhs-grid-column>
            <nhs-grid-column grid-column-width="OneQuarter">
                <div class="notification-details-label"> Denotification Reason </div>
                <div class="cell-min-height" id="overview-denotification-reason"> @Model.Notification?.DenotificationDetails.DenotificationReasonString </div>
            </nhs-grid-column>
        </nhs-grid-row>
    }

</div>