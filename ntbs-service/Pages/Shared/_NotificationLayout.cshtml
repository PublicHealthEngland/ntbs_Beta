@model ntbs_service.Pages_Notifications.NotificationModelBase
@{
    Layout = "../Shared/_Layout.cshtml";
    var splitUrlPath = Context.Request.Path.ToString().Split("/");
    var currentPage = splitUrlPath[splitUrlPath.Length-1];
}
  
<form method="post" autocomplete="off" class="notification-container">
    <input type="hidden" asp-for="NotificationId" />
    <div class="notification-sideline-container"></div>
    <div class="notification-body-container">
        <nhs-width-container container-width="Fluid">
            <nhs-main-wrapper>
                <nhs-grid-row>
                    <nhs-grid-column grid-column-width="Full">
                        <h1 class="nhs-heading-1">NTBS #@Model.NotificationId - @Model.NotificationStatus </h1>
                        <div class="patient-layout-flexbox">
                            <div class="contents-list">
                                <!-- Overview available if notification has been submitted -->
                                @if (Model.NotificationStatus == NotificationStatus.Notified)
                                {
                                    <li class="@("contents-list-item " + (currentPage == "Overview" ? "contents-list-item--current" : ""))">
                                        <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Overview?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Overview</a>
                                    </li>
                                }
                                <li class="@("contents-list-item " + (currentPage == "Patient" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Patient?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Person details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Episode" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Episode?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Hospital details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ClinicalDetails" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ClinicalDetails?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Clinical Details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ContactTracing" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ContactTracing?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Contact Tracing</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "SocialRiskFactors" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/SocialRiskFactors?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Social Risk Factors</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Travel" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Travel?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Travel/visitor history</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Comorbidities" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Comorbidities?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Co-morbidities</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Immunosupression" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Immunosupression?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Immunosupression</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "PreviousHistory" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/PreviousHistory?id=@Model.NotificationId&isBeingSubmitted=@Model.Notification.ShouldValidateFull">Previous History</a>
                                </li>
                            </div>
                            <div style="width: 100%"> 
                                @RenderBody()
                            </div>
                        </div>
                    </nhs-grid-column>
                </nhs-grid-row>
            </nhs-main-wrapper>
        </nhs-width-container>
    </div>

    <div class="nhsuk-main-wrapper notification-sideline-container">
        <aside class="manage-notification-section">
            <h2 class="govuk-heading-m" id="manage-notification-title">
                Manage Notification
            </h2>
            @if(Model.NotificationStatus == NotificationStatus.Draft) 
            {
              <button nhs-button-type="Standard" asp-page-handler="Submit">Submit</button>
            }
            </aside>
    </div>
</form>
@RenderSection("Scripts", required: false)