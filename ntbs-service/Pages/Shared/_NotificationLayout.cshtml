@model ntbs_service.Pages_Notifications.NotificationModelBase
@{
    Layout = "../Shared/_Layout.cshtml";
    var splitUrlPath = Context.Request.Path.ToString().Split("/");
    var currentPage = splitUrlPath[splitUrlPath.Length-1];
}
  
<form method="post" autocomplete="off" class="notification-container">
    <input type="hidden" asp-for="NotificationId" />
    <div class="notification-sideline-container"></div>
    <div class="notification-body-container">
        <nhs-width-container container-width="Fluid">
            <nhs-main-wrapper>
                <nhs-grid-row>
                    <nhs-grid-column grid-column-width="Full">
                        <div class="notification-banner"> 
                            <div class="notification-banner-title-container"> 
                                <div class="nhsuk-grid-row" style="padding-bottom: 10px">
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600; font-size: 30px"> Notification </div>
                                        <div style="font-weight: 600; font-size: 30px"> #@(notificationId) </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Date of notification </div>
                                        <div> </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> TB service </div>
                                        <div> @Model.NotificationBannerDetails.Episode.TBService?.Name </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Case manager </div>
                                        <div> @Model.NotificationBannerDetails.Episode.CaseManager </div>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-banner-details-container"> 
                                <div class="nhsuk-grid-row" style="padding-bottom: 10px">
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> NHS number </div>
                                        <div>  @(@Model.NotificationBannerDetails.Patient.NhsNumber.ToString().Substring(0, 3) + " " + @Model.NotificationBannerDetails.Patient.NhsNumber.ToString().Substring(3, 3) 
                                    + " " + @Model.NotificationBannerDetails.Patient.NhsNumber.ToString().Substring(6, 4)) </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Date of birth </div>
                                        <div> @Model.NotificationBannerDetails.Patient.Dob?.ToString("dd-MMM-yyyy") </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Country of birth </div>
                                        <div> @Model.NotificationBannerDetails.Patient.Country?.Name </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Post code </div>
                                        <div> @(@Model.NotificationBannerDetails.Patient.NoFixedAbode ? "No fixed abode" : @Model.NotificationBannerDetails.Patient.Postcode) </div>
                                    </div>
                                </div>
                                <div class="nhsuk-grid-row" style="padding-bottom: 10px">
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Name </div>
                                        <div> @Model.NotificationBannerDetails.Patient.FamilyName?.ToString().ToUpper(), @Model.NotificationBannerDetails.Patient.GivenName </div>
                                    </div>
                                    <div class="nhsuk-grid-column-one-quarter">
                                        <div style="font-weight: 600"> Sex </div>
                                        <div> @Model.NotificationBannerDetails.Patient.Sex?.Label </div>
                                    </div>
                                </div> 
                            </div>
                        </div>
                        <div style="padding-bottom: 10px"> Notification details / Audit </div>
                        <div class="patient-layout-flexbox">
                            <div class="contents-list">
                                <!-- Overview available if notification has been submitted -->
                                @if (ViewData["OverviewAvailable"] as bool? ?? false)
                                {
                                    <li class="@("contents-list-item " + (currentPage == "Overview" ? "contents-list-item--current" : ""))">
                                        <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Overview?id=@Model.NotificationId">Overview</a>
                                    </li>
                                }
                                <li class="@("contents-list-item " + (currentPage == "Patient" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Patient?id=@Model.NotificationId">Person details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Episode" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Episode?id=@Model.NotificationId">Hospital details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ClinicalDetails" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ClinicalDetails?id=@Model.NotificationId">Clinical Details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ContactTracing" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ContactTracing?id=@Model.NotificationId">Contact Tracing</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "SocialRiskFactors" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/SocialRiskFactors?id=@Model.NotificationId">Social Risk Factors</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Travel" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Travel?id=@Model.NotificationId">Travel/visitor history</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Comorbidities" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Comorbidities?id=@Model.NotificationId">Co-morbidities</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Immunosupression" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Immunosupression?id=@Model.NotificationId">Immunosupression</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "PreviousHistory" ? "contents-list-item--current" : ""))">
                                  <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/PreviousHistory?id=@Model.NotificationId">Previous History</a>
                                </li>
                            </div>
                            <div style="width: 100%"> 
                                @RenderBody()
                            </div>
                        </div>
                    </nhs-grid-column>
                </nhs-grid-row>
            </nhs-main-wrapper>
        </nhs-width-container>
    </div>

    <div class="nhsuk-main-wrapper notification-sideline-container">
        <aside class="manage-notification-section">
            <h2 class="govuk-heading-m" id="manage-notification-title">
                Manage Notification
            </h2>
            <button nhs-button-type="Standard" asp-page-handler="Submit">Submit</button>
            </aside>
    </div>
</form>
@RenderSection("Scripts", required: false)