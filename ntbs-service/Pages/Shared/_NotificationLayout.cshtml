@model ntbs_service.Pages_Notifications.NotificationModelBase
@{
    Layout = "../Shared/_Layout.cshtml";
    var splitUrlPath = Context.Request.Path.ToString().Split("/");
    var currentPage = splitUrlPath[splitUrlPath.Length-1];
}
  
<form method="post" autocomplete="off" class="notification-container">
    <input type="hidden" asp-for="Notification.NotificationId" />
    <div class="notification-sideline-container"></div>
    <div class="notification-body-container">
        <nhs-width-container container-width="Fluid">
            <nhs-main-wrapper>
                <nhs-grid-row>
                    <nhs-grid-column grid-column-width="Full">
                        <div class="@Model.Notification.NotificationBannerCssClass">
                            <div class="notification-banner-title-container @Model.Notification.NotificationBannerTitleCssClass"> 
                                <nhs-grid-row classes="notification-overview-details">
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-banner-title-text"> @Model.Notification.NotificationStatusString </div>
                                        <div class="notification-banner-title-text"> #@Model.Notification.NotificationId </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Date of notification </div>
                                        <div class="cell-min-height"> @Model.Notification.FormattedSubmissionDate </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> TB service </div>
                                        <div> @Model.Notification.TBServiceName </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Case manager </div>
                                        <div class="cell-min-height"> @Model.Notification.Episode.CaseManager </div>
                                    </nhs-grid-column>
                                </nhs-grid-row>
                            </div>
                            <div class="notification-banner-details-container"> 
                                <nhs-grid-row classes="notification-overview-details">
                                    <nhs-grid-column grid-column-width="OneQuarter" classes="notification-banner-field">
                                        <div class="notification-details-label"> NHS number </div>
                                        <div class="cell-min-height">  @Model.Notification.FormattedNhsNumber </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Date of birth </div>
                                        <div class="cell-min-height"> @Model.Notification.FormattedDob </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Country of birth </div>
                                        <div class="cell-min-height"> @Model.Notification.CountryName </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Postcode </div>
                                        <div> @Model.Notification.FormattedNoAbodeOrPostcodeString </div>
                                    </nhs-grid-column>
                                </nhs-grid-row>
                                <nhs-grid-row classes="notification-overview-details">
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Name </div>
                                        <div class="cell-min-height"> @Model.Notification.FullName </div>
                                    </nhs-grid-column>
                                    <nhs-grid-column grid-column-width="OneQuarter">
                                        <div class="notification-details-label"> Sex </div>
                                        <div class="cell-min-height"> @Model.Notification.SexLabel </div>
                                    </nhs-grid-column>
                                </nhs-grid-row> 
                            </div>
                            <div class="notification-banner-triangle @Model.Notification.NotificationBannerTriangleCssClass"> </div>

                        </div>
                        <div class="notification-banner-links-container"> 
                            <a href="/Notifications/Overview?id=@Model.Notification.NotificationId"> Notification details </a>
                            <div class="notification-banner-link-separator"> </div>
                            <a href="/Notifications/Overview?id=@Model.Notification.NotificationId"> Audit </a>
                        </div>
                        <div class="patient-layout-flexbox">
                            <div class="contents-list">
                                <li class="@("contents-list-item " + (currentPage == "Patient" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Patient?id=@Model.Notification.NotificationId">Person details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Episode" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Episode?id=@Model.Notification.NotificationId">Hospital details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ClinicalDetails" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ClinicalDetails?id=@Model.Notification.NotificationId">Clinical Details</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "ContactTracing" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/ContactTracing?id=@Model.Notification.NotificationId">Contact Tracing</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "SocialRiskFactors" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/SocialRiskFactors?id=@Model.Notification.NotificationId">Social Risk Factors</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Travel" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Travel?id=@Model.Notification.NotificationId">Travel/visitor history</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Comorbidities" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Comorbidities?id=@Model.Notification.NotificationId">Co-morbidities</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "Immunosupression" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/Immunosupression?id=@Model.Notification.NotificationId">Immunosupression</a>
                                </li>
                                <li class="@("contents-list-item " + (currentPage == "PreviousHistory" ? "contents-list-item--current" : ""))">
                                    <a class="app-subnav__link govuk-link govuk-link--no-visited-state" href="/Notifications/Edit/PreviousHistory?id=@Model.Notification.NotificationId">Previous History</a>
                                </li>
                            </div>
                            <div style="width: 100%"> 
                                @RenderBody()
                            </div>
                        </div>
                    </nhs-grid-column>
                </nhs-grid-row>
            </nhs-main-wrapper>
        </nhs-width-container>
    </div>

    <div class="nhsuk-main-wrapper notification-sideline-container">
        <aside class="manage-notification-section">
            <h2 class="govuk-heading-m" id="manage-notification-title">
                Manage Notification
            </h2>
            <button nhs-button-type="Standard" asp-page-handler="Submit">Submit</button>
        </aside>
    </div>
</form>
@RenderSection("Scripts", required: false)